import sys, os\ncwd = os.getcwd()\nsync_path = os.path.join(cwd, 'Sync folder MAC TO PC', 'DESKTOP_HANDOFF_PACKAGE', 'google-cloud-trading-system')\nif os.path.exists(sync_path) and sync_path not in sys.path:\n    sys.path.insert(0, sync_path)\n\nfrom src.core.account_orchestrator import get_account_orchestrator, route_signal_dict\nfrom src.core.order_manager import TradeSignal, OrderSide\nfrom datetime import datetime\n\n\ndef test_route_signal_object_and_dict():\n    orc = get_account_orchestrator()\n    orc._managers.clear()\n    orc._executors.clear()\n\n    executed = []\n\n    def exec_fn(sig):\n        executed.append(sig)\n        return {'status': 'ok', 'acct': 't1'}\n\n    orc.register_account('t1', executor=exec_fn)\n\n    ts = TradeSignal(\n        instrument='EUR_USD',\n        side=OrderSide.BUY,\n        units=100000,\n        entry_price=1.1,\n        stop_loss=1.099,\n        take_profit=1.103,\n        confidence=0.6,\n        timestamp=datetime.utcnow(),\n        strategy_name='test',\n        account_id='t1'\n    )\n\n    res = orc.route_signal(ts)\n    assert res and res.get('status') == 'ok'\n    assert len(executed) == 1\n\n    # dict path\n    d = {'instrument': 'XAU_USD', 'side': 'SELL', 'entry_price': 2000.0, 'stop_loss': 2010.0, 'take_profit': 1990.0, 'confidence': 0.5, 'strategy': 'test', 'account_id': 't1'}\n    rd = route_signal_dict(d)\n    assert rd and rd.get('status') == 'ok'\n+\n*** End Patch**"}}

