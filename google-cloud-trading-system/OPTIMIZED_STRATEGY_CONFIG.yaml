# ===============================================
# OPTIMIZED TRADING STRATEGY CONFIGURATION
# MAXIMUM 10 TRADES PER STRATEGY (30 TOTAL)
# ===============================================

# OANDA Trading API Configuration
oanda:
  api_key: "REMOVED_SECRET"
  environment: "practice"
  base_url: "https://api-fxpractice.oanda.com"
  
  # Account Configuration
  accounts:
    primary: "101-004-30719775-009"    # Ultra Strict Forex
    gold_scalp: "101-004-30719775-010" # Gold Scalping  
    alpha: "101-004-30719775-011"      # Momentum Trading

# Strategy Mapping
strategy_mapping:
  primary: "ultra_strict_forex"
  gold_scalp: "gold_scalping"
  alpha: "momentum_trading"

# ===============================================
# OPTIMIZED RISK MANAGEMENT - 10 TRADES PER STRATEGY
# ===============================================

risk_management:
  # Primary Account (Ultra Strict Forex) - MAX 10/DAY
  primary:
    max_risk_per_trade: 0.02
    max_portfolio_risk: 0.75
    max_positions: 5
    daily_trade_limit: 10              # OPTIMIZED: 10 trades per day
    instruments: ["EUR_USD", "GBP_USD", "USD_JPY", "AUD_USD"]
    
  # Gold Scalping Account - MAX 10/DAY  
  gold_scalp:
    max_risk_per_trade: 0.015
    max_portfolio_risk: 0.75
    max_positions: 3
    daily_trade_limit: 10              # OPTIMIZED: 10 trades per day
    instruments: ["XAU_USD"]
    
  # Alpha Account (Momentum Trading) - MAX 10/DAY
  alpha:
    max_risk_per_trade: 0.025
    max_portfolio_risk: 0.75
    max_positions: 7
    daily_trade_limit: 10              # OPTIMIZED: 10 trades per day
    instruments: ["EUR_USD", "GBP_USD", "USD_JPY", "AUD_USD", "USD_CAD", "NZD_USD", "EUR_JPY", "GBP_JPY", "AUD_JPY"]

# ===============================================
# OPTIMIZED STRATEGY PARAMETERS
# ===============================================

strategies:
  ultra_strict_forex:
    name: "Ultra Strict Forex - Optimized"
    max_trades_per_day: 10             # OPTIMIZED: 10 trades per day
    min_trades_today: 0                # NO FORCED TRADES
    
    # Optimized R:R Ratios
    stop_loss_pct: 0.004               # OPTIMIZED: 0.4% stop loss
    take_profit_pct: 0.020             # OPTIMIZED: 2.0% take profit = 1:5.0 R:R
    
    # Enhanced Signal Quality
    min_signal_strength: 0.85          # OPTIMIZED: Very high quality
    quality_score_threshold: 0.90      # OPTIMIZED: High quality threshold
    max_daily_quality_trades: 5        # Top 5 quality trades per day
    
    # EMA Parameters
    ema_periods: [3, 8, 21]
    
    # Enhanced Entry Filters
    require_trend_alignment: true
    trend_timeframes: ["5M", "15M", "1H", "4H"]  # ALL must align
    trend_strength_min: 0.75                      # Strong trend required
    only_trade_london_ny: true                    # High volume sessions only
    min_volatility_threshold: 0.00006             # Higher volatility required
    max_spread_threshold: 0.8                     # Reasonable spreads
    require_volume_confirmation: true
    min_volume_multiplier: 1.5                    # 1.5x average volume
    
    # Multiple Confirmations
    require_multiple_confirmations: true
    min_confirmations: 3                          # At least 3 confirmations

  gold_scalping:
    name: "Gold Scalping - Optimized"
    max_trades_per_day: 10             # OPTIMIZED: 10 trades per day
    min_trades_today: 0                # NO FORCED TRADES
    
    # Optimized R:R Ratios
    stop_loss_pips: 8                  # OPTIMIZED: 8 pips stop
    take_profit_pips: 32               # OPTIMIZED: 32 pips target = 1:4.0 R:R
    
    # Enhanced Signal Quality
    min_signal_strength: 0.80          # OPTIMIZED: High quality required
    quality_score_threshold: 0.85      # OPTIMIZED: High quality threshold
    max_daily_quality_trades: 5        # Top 5 quality trades per day
    
    # Enhanced Entry Filters
    require_pullback: true
    pullback_ema_period: 21            # Must pull back to 21 EMA
    only_trade_london_ny: true         # High volume sessions only
    min_time_between_trades_minutes: 45  # OPTIMIZED: Increased spacing
    min_volatility: 0.00008            # OPTIMIZED: Higher volatility required
    max_spread: 0.6                    # OPTIMIZED: Tighter spreads
    min_atr_for_entry: 2.0             # OPTIMIZED: Higher ATR required
    
    # Breakout Parameters
    breakout_lookback: 20              # OPTIMIZED: Longer lookback
    breakout_threshold: 0.003          # OPTIMIZED: 0.3% move required
    
    # Multiple Confirmations
    require_multiple_confirmations: true
    min_confirmations: 3               # At least 3 confirmations
    
    # Session Preferences
    prefer_london_ny_overlap: true     # Prefer 13:00-16:00 UTC

  momentum_trading:
    name: "Momentum Trading - Optimized"
    max_trades_per_day: 10             # OPTIMIZED: 10 trades per day
    min_trades_today: 0                # NO FORCED TRADES
    
    # Optimized R:R Ratios
    stop_loss_atr: 1.2                 # OPTIMIZED: Reasonable stop loss
    take_profit_atr: 6.0               # OPTIMIZED: Better target = 1:5.0 R:R
    
    # Enhanced Signal Quality
    min_adx: 25                        # OPTIMIZED: Only very strong trends
    min_momentum: 0.40                 # OPTIMIZED: Only strong momentum
    min_volume: 0.30                   # OPTIMIZED: Only high volume
    quality_score_threshold: 0.85      # OPTIMIZED: High quality threshold
    max_daily_quality_trades: 5        # Top 5 quality trades per day
    
    # Technical Parameters
    momentum_period: 14
    volume_period: 20
    atr_period: 14
    adx_period: 14
    
    # Enhanced Entry Filters
    require_trend_alignment: true
    trend_timeframes: ["5M", "15M", "1H", "4H"]  # ALL must align
    trend_strength_min: 0.75                      # Strong trend required
    only_trade_london_ny: true                    # High volume sessions
    min_volatility_threshold: 0.00006             # Higher volatility required
    max_spread_threshold: 0.8                     # Reasonable spreads
    
    # Multiple Confirmations
    require_multiple_confirmations: true
    min_confirmations: 3                          # At least 3 confirmations
    
    # Session Preferences
    prefer_london_ny_overlap: true                # Prefer 13:00-16:00 UTC

# ===============================================
# OPTIMIZED EARLY CLOSURE SYSTEM
# ===============================================

early_closure:
  profit_pct: 0.0015                   # Close at +0.15% profit
  loss_pct: -0.003                     # Close at -0.3% loss
  max_hold_time_minutes: 120           # OPTIMIZED: 2 hours max
  trailing_stop_enabled: true
  trailing_stop_distance: 0.001        # 0.1% trailing distance
  
  # Trailing Stop Activation
  trailing_stop_activation_profit: 0.0005  # Start trailing after +0.05%

# ===============================================
# OPTIMIZED QUALITY FILTERS
# ===============================================

quality_filters:
  max_daily_quality_trades: 5          # Top 5 per strategy per day
  min_signal_strength: 0.85            # OPTIMIZED: Very high quality
  quality_score_threshold: 0.90        # OPTIMIZED: High quality threshold
  daily_trade_ranking: true            # Rank and select best
  
  # Multi-Confirmation Requirements
  require_multiple_confirmations: true
  confirmation_sources: ["technical", "volume", "news", "sentiment"]
  min_confirmations: 3                 # At least 3 sources must confirm

# ===============================================
# OPTIMIZED SESSION SETTINGS
# ===============================================

trading_sessions:
  only_trade_london_ny: true           # High volume sessions only
  london_session_start: 7              # 07:00 UTC
  london_session_end: 16               # 16:00 UTC
  ny_session_start: 13                 # 13:00 UTC
  ny_session_end: 21                   # 21:00 UTC
  prefer_london_ny_overlap: true       # Prefer 13:00-16:00 UTC overlap
  
  # Session Filters
  asia_session_start: 21               # 21:00 UTC
  asia_session_end: 7                  # 07:00 UTC (next day)

# ===============================================
# OPTIMIZED VOLATILITY & SPREAD FILTERS
# ===============================================

market_conditions:
  min_volatility_threshold: 0.00006    # OPTIMIZED: Higher volatility required
  max_spread_threshold: 0.8            # OPTIMIZED: Reasonable spreads
  
  # Volatility Settings
  volatility_period: 20
  volatility_multiplier: 1.5           # 1.5x average volatility required
  
  # Spread Settings
  max_spread_pips: 0.8                 # Maximum spread in pips
  spread_check_frequency: 60           # Check spreads every 60 seconds

# ===============================================
# NEWS INTEGRATION - OPTIMIZED
# ===============================================

news_integration:
  enabled: true
  require_news_alignment: true         # News must align with trade
  min_news_sentiment: 0.6             # OPTIMIZED: Good news sentiment required
  avoid_high_impact_events: true       # Avoid all high impact events
  
  # News Sources
  sources: ["alpha_vantage", "marketaux", "newsdata", "newsapi"]
  
  # News Filtering
  high_impact_keywords: ["Fed", "FOMC", "NFP", "CPI", "GDP", "rates", "inflation"]
  pause_trading_on_high_impact: true
  resume_trading_after_minutes: 30     # Resume 30 minutes after high impact

# ===============================================
# TELEGRAM NOTIFICATIONS
# ===============================================

notifications:
  telegram:
    enabled: true
    token: "${TELEGRAM_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
    
    # Notification Settings
    notify_on_trade_entry: true
    notify_on_trade_exit: true
    notify_on_early_close: true
    notify_daily_summary: true
    notify_system_alerts: true
    
    # Message Templates
    trade_entry_template: "ðŸŽ¯ OPTIMIZED ENTRY: {strategy} {instrument} {side} at {price} (Confidence: {confidence:.2f})"
    trade_exit_template: "âœ… OPTIMIZED EXIT: {strategy} {instrument} {side} - P&L: {pnl:.2f} ({reason})"
    daily_summary_template: "ðŸ“Š OPTIMIZED DAILY SUMMARY: {total_trades} trades, P&L: {total_pnl:.2f}"

# ===============================================
# DATA VALIDATION SETTINGS
# ===============================================

data_validation:
  max_data_age_seconds: 300            # 5 minutes max data age
  min_confidence_threshold: 0.85       # OPTIMIZED: High confidence required
  require_live_data: true              # Live data only
  
  # Data Quality Checks
  price_deviation_threshold: 0.001     # Max 0.1% price deviation
  volume_spike_threshold: 2.5          # 2.5x average volume spike
  spread_anomaly_threshold: 2.0        # 2x normal spread

# ===============================================
# SYSTEM PERFORMANCE SETTINGS
# ===============================================

performance:
  dashboard_update_interval: 15        # 15 seconds
  market_data_update_interval: 5       # 5 seconds
  system_status_check_interval: 30     # 30 seconds
  
  # Memory Management
  max_price_history_bars: 1000         # Limit price history
  max_signal_history: 100              # Limit signal history
  cleanup_interval_minutes: 60         # Cleanup every hour

# ===============================================
# LOGGING CONFIGURATION
# ===============================================

logging:
  level: "INFO"
  enable_structured_logging: true
  
  # Log Files
  trade_log: "logs/optimized_trades.log"
  system_log: "logs/optimized_system.log"
  error_log: "logs/optimized_errors.log"
  
  # Log Rotation
  max_file_size: "10MB"
  backup_count: 5

# ===============================================
# SECURITY SETTINGS
# ===============================================

security:
  api_rate_limit: 100                  # 100 requests per window
  api_rate_window: 60                  # 60 second window
  cors_origins: "*"                    # CORS settings
  
  # Authentication
  require_api_key: true
  api_key_header: "X-API-Key"
  
  # Rate Limiting
  requests_per_minute: 60
  burst_limit: 10

# ===============================================
# OPTIMIZED SUMMARY
# ===============================================

summary:
  total_max_trades_per_day: 30         # MAXIMUM 30 TRADES PER DAY TOTAL (10 per strategy)
  no_forced_trading: true              # NO FORCED TRADES EVER
  optimized_quality_focus: true        # Only high-quality setups
  optimized_exits: true                # 2 hour max hold with early closure
  optimized_entries: true              # Multi-timeframe + news alignment
  
  expected_improvements:
    trade_reduction: "85-90%"          # From 180-400 to 0-30 trades/day
    rr_improvement: "25-50%"           # 1:4.0 to 1:5.0 ratios
    quality_improvement: "21%"         # 0.70 to 0.85 signal strength
    risk_reduction: "75%"              # Optimized stops and quick exits
    
  strategy_breakdown:
    ultra_strict_forex: "10 trades/day max (1:5.0 R:R)"
    gold_scalping: "10 trades/day max (1:4.0 R:R)"
    momentum_trading: "10 trades/day max (1:5.0 R:R)"
